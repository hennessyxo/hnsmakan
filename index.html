<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>–ü–ª–µ–µ—Ä ‚Äî –ú–∞–∫–∞–Ω (—Ä–∞–Ω–¥–æ–º, SoundCloud)</title>
  <style>
    body{font-family:Inter,Arial; background:#071022; color:#e6eef8; display:flex; align-items:center; justify-content:center; min-height:100vh; margin:0; padding:20px}
    .card{width:min(820px,96vw); background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); padding:20px; border-radius:12px; box-shadow:0 10px 40px rgba(0,0,0,0.6)}
    h1{margin:0 0 8px 0}
    .controls{display:flex; gap:10px; flex-wrap:wrap; margin-bottom:12px}
    button{padding:10px 14px;border-radius:8px;border:0;cursor:pointer;background:rgba(255,255,255,0.04);color:inherit;font-weight:600}
    .big{background:linear-gradient(90deg, rgba(125,211,252,0.12), rgba(125,211,252,0.06)); color:#7dd3fc}
    .info{color:#94a3b8;margin-bottom:10px}
    .player-frame{width:100%; height:166px; border-radius:8px; overflow:hidden; border:1px solid rgba(255,255,255,0.03)}
    .note{font-size:13px;color:#9fb0c7;margin-top:10px}
  </style>
</head>
<body>
  <div class="card" role="application" aria-label="SoundCloud –ø–ª–µ–µ—Ä –ú–∞–∫–∞–Ω">
    <h1>–ü–ª–µ–µ—Ä ‚Äî MACAN (—Ä–∞–Ω–¥–æ–º, SoundCloud)</h1>
    <div class="info">–ü–ª–µ–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã SoundCloud (–≤—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π –ø–ª–µ–µ—Ä). –ù–∏–∫–∞–∫–∏—Ö –ø—Ä—è–º—ã—Ö mp3-—Ñ–∞–π–ª–æ–≤.</div>

    <div class="controls">
      <button id="prevBtn">‚óÄ –ü—Ä–µ–¥—ã–¥—É—â–∏–π</button>
      <button id="playRandomBtn" class="big">üîÄ –°–ª—É—à–∞—Ç—å (—Ä–∞–Ω–¥–æ–º)</button>
      <button id="nextBtn">–°–ª–µ–¥—É—é—â–∏–π ‚ñ∂</button>
      <button id="stopBtn">‚èπ –°—Ç–æ–ø</button>
    </div>

    <div id="currentMeta" style="margin-bottom:8px">
      <strong id="trackTitle">‚Äî</strong>
      <div id="trackSource" class="info">–ò—Å—Ç–æ—á–Ω–∏–∫–∏: SoundCloud</div>
    </div>

    <div class="player-frame" aria-hidden="false">
      <!-- —Å—é–¥–∞ –±—É–¥–µ—Ç –ø–æ–¥—Å—Ç–∞–≤–ª—è—Ç—å—Å—è iframe SoundCloud –ø–ª–µ–µ—Ä–∞ -->
      <iframe id="scFrame" width="100%" height="166" scrolling="no" frameborder="no"
        src="about:blank" allow="autoplay"></iframe>
    </div>

    <div class="note">
      –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç: –∫–Ω–æ–ø–∫–∞ ¬´–°–ª—É—à–∞—Ç—å¬ª –≤—ã–±–∏—Ä–∞–µ—Ç —Å–ª—É—á–∞–π–Ω—ã–π —Ç—Ä–µ–∫ –∏–∑ —Å–ø–∏—Å–∫–∞ SoundCloud –∏ –ø–æ–¥–≥—Ä—É–∂–∞–µ—Ç –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –ø–ª–µ–µ—Ä.
      –ï—Å–ª–∏ —Ö–æ—á–µ—à—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ç—Ä–µ–∫–∏ –¥–æ–±–∞–≤–∏—Ç—å/—É–±—Ä–∞—Ç—å ‚Äî —Å–∫–∞–∂–∏, –∏ —è –æ–±–Ω–æ–≤–ª—é —Å–ø–∏—Å–æ–∫.
    </div>
  </div>

<script>
  // –°–ø–∏—Å–æ–∫ –ø—É–±–ª–∏—á–Ω—ã—Ö SoundCloud —Å—Ç—Ä–∞–Ω–∏—Ü —Ç—Ä–µ–∫–æ–≤ Macan (—è –ø–æ–¥–æ–±—Ä–∞–ª –∏—Ö –∏–∑ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤)
  // –ï—Å–ª–∏ –∑–∞—Ö–æ—á–µ—à—å, –º–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å URL –Ω–∞ –¥—Ä—É–≥–∏–µ –ø—É–±–ª–∏—á–Ω—ã–µ SoundCloud/YouTube —Å—Ç—Ä–∞–Ω–∏—Ü—ã.
  const tracks = [
    { title: "MACAN - MP3", url: "https://soundcloud.com/macan-sound/macan-mp3" },
    { title: "–ú–∞–∫–∞–Ω - –ë—Ä–∞—Ç", url: "https://soundcloud.com/macan-sound/makan-brat" },
    { title: "–ú–∞–∫–∞–Ω - –ê—Å—Ñ–∞–ª—å—Ç 8", url: "https://soundcloud.com/macan-sound/makan-asfalt-8" },
    { title: "–ú–∞–∫–∞–Ω - –°–∞–º—ã–π –ø—å—è–Ω—ã–π –æ–∫—Ä—É–≥ –≤ –º–∏—Ä–µ", url: "https://soundcloud.com/macan-sound/makan-samyi-pyanyi-okrug-v" },
    { title: "–º–∞–∫–∞–Ω - –ø–æ –ø–æ–ª–∞–º", url: "https://soundcloud.com/macan-sound/papalam" }
  ];

  // DOM
  const scFrame = document.getElementById('scFrame');
  const playRandomBtn = document.getElementById('playRandomBtn');
  const nextBtn = document.getElementById('nextBtn');
  const prevBtn = document.getElementById('prevBtn');
  const stopBtn = document.getElementById('stopBtn');
  const trackTitle = document.getElementById('trackTitle');

  let currentIndex = -1;

  // –°–æ–±–∏—Ä–∞–µ–º URL –¥–ª—è –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ SoundCloud player iframe.
  // –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
  //  - auto_play:  true/false (–±—É–¥–µ—Ç –ø–æ–ø—ã—Ç–∫–∞ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞; –≤ –º–æ–±–∏–ª—å–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö —ç—Ç–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ –µ—Å–ª–∏ –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞–Ω–æ –∫–ª–∏–∫–æ–º)
  //  - hide_related, show_comments –∏ —Ç.–¥. –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å
  function scEmbedUrl(trackPageUrl, autoPlay=false) {
    const base = "https://w.soundcloud.com/player/";
    const params = new URLSearchParams({
      url: trackPageUrl,
      auto_play: autoPlay ? "true" : "false",
      hide_related: "false",
      show_comments: "true",
      show_user: "true",
      show_reposts: "false",
      visual: "true"
    });
    return base + "?" + params.toString();
  }

  function loadTrack(index, tryAutoplay=false){
    if (!tracks.length) return;
    index = ((index % tracks.length) + tracks.length) % tracks.length;
    currentIndex = index;
    const t = tracks[index];
    trackTitle.textContent = t.title;
    // –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ–º embed iframe (–ø—Ä–∏ –∫–ª–∏–∫–µ ‚Äî —ç—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ, –ø–æ—ç—Ç–æ–º—É –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ —á–∞—â–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç)
    scFrame.src = scEmbedUrl(t.url, tryAutoplay);
  }

  function playRandom(){
    if (!tracks.length) return;
    let idx = Math.floor(Math.random() * tracks.length);
    // –ø–æ–ø—Ä–æ–±—É–µ–º –≤—ã–±—Ä–∞—Ç—å –¥—Ä—É–≥–æ–π, –µ—Å–ª–∏ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –∏ –æ–Ω —É–∂–µ –∏–≥—Ä–∞–µ—Ç ‚Äî –æ—Å—Ç–∞–≤–∏—Ç—å
    if (tracks.length > 1 && idx === currentIndex) {
      idx = (idx + 1) % tracks.length;
    }
    loadTrack(idx, true);
  }

  playRandomBtn.addEventListener('click', ()=>{
    playRandom();
  });

  nextBtn.addEventListener('click', ()=>{
    if (!tracks.length) return;
    loadTrack(currentIndex + 1, true);
  });

  prevBtn.addEventListener('click', ()=>{
    if (!tracks.length) return;
    loadTrack(currentIndex - 1, true);
  });

  stopBtn.addEventListener('click', ()=>{
    // –ß—Ç–æ–±—ã –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å: –∑–∞–º–µ–Ω–∏–º src –Ω–∞ about:blank (–∏–ª–∏ –Ω–∞ —Ç–æ—Ç –∂–µ —Ç—Ä–µ–∫ –±–µ–∑ autoplay)
    scFrame.src = "about:blank";
    trackTitle.textContent = "‚Äî";
    currentIndex = -1;
  });

  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è: –ø–æ–∫–∞–∂–µ–º –ø–µ—Ä–≤—ã–π —Ç—Ä–µ–∫ –±–ª–æ–∫–∏—Ä–æ–≤–∫–æ–π –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞ (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –Ω–∞–∂–∞—Ç—å)
  if (tracks.length) {
    loadTrack(0, false);
  }
</script>
</body>
</html>
